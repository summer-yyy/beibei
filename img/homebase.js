var md5=function(e){var t=function(e){return"[object String]"===Object.prototype.toString.call(e)};t(e)||(e=e.toString());var i=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);128>n?t+=String.fromCharCode(n):n>127&&2048>n?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},n,o=function(e,t){return e<<t|e>>>32-t},r=function(e,t){var i,n,o,r,a;return o=2147483648&e,r=2147483648&t,i=1073741824&e,n=1073741824&t,a=(1073741823&e)+(1073741823&t),i&n?2147483648^a^o^r:i|n?1073741824&a?3221225472^a^o^r:1073741824^a^o^r:a^o^r},a=function(e,t,i){return e&t|~e&i},s=function(e,t,i){return e&i|t&~i},c=function(e,t,i){return e^t^i},l=function(e,t,i){return t^(e|~i)},d=function(e,t,i,n,s,c,l){return e=r(e,r(r(a(t,i,n),s),l)),r(o(e,c),t)},u=function(e,t,i,n,a,c,l){return e=r(e,r(r(s(t,i,n),a),l)),r(o(e,c),t)},p=function(e,t,i,n,a,s,l){return e=r(e,r(r(c(t,i,n),a),l)),r(o(e,s),t)},f=function(e,t,i,n,a,s,c){return e=r(e,r(r(l(t,i,n),a),c)),r(o(e,s),t)},g=function(e){for(var t,i=e.length,n=i+8,o=(n-n%64)/64,r=16*(o+1),a=new Array(r-1),s=0,c=0;i>c;)t=(c-c%4)/4,s=c%4*8,a[t]=a[t]|e.charCodeAt(c)<<s,c++;return t=(c-c%4)/4,s=c%4*8,a[t]=a[t]|128<<s,a[r-2]=i<<3,a[r-1]=i>>>29,a},h=function(e){var t="",i="",n,o;for(o=0;3>=o;o++)n=e>>>8*o&255,i="0"+n.toString(16),t+=i.substr(i.length-2,2);return t},m=[],v,w,b,x,_,y,C,B,$,k=7,M=12,S=17,L=22,T=5,I=9,j=14,P=20,N=4,F=11,E=16,O=23,U=6,D=10,R=15,z=21;for(e=i(e),m=g(e),y=1732584193,C=4023233417,B=2562383102,$=271733878,n=m.length,v=0;n>v;v+=16)w=y,b=C,x=B,_=$,y=d(y,C,B,$,m[v+0],k,3614090360),$=d($,y,C,B,m[v+1],M,3905402710),B=d(B,$,y,C,m[v+2],S,606105819),C=d(C,B,$,y,m[v+3],L,3250441966),y=d(y,C,B,$,m[v+4],k,4118548399),$=d($,y,C,B,m[v+5],M,1200080426),B=d(B,$,y,C,m[v+6],S,2821735955),C=d(C,B,$,y,m[v+7],L,4249261313),y=d(y,C,B,$,m[v+8],k,1770035416),$=d($,y,C,B,m[v+9],M,2336552879),B=d(B,$,y,C,m[v+10],S,4294925233),C=d(C,B,$,y,m[v+11],L,2304563134),y=d(y,C,B,$,m[v+12],k,1804603682),$=d($,y,C,B,m[v+13],M,4254626195),B=d(B,$,y,C,m[v+14],S,2792965006),C=d(C,B,$,y,m[v+15],L,1236535329),y=u(y,C,B,$,m[v+1],T,4129170786),$=u($,y,C,B,m[v+6],I,3225465664),B=u(B,$,y,C,m[v+11],j,643717713),C=u(C,B,$,y,m[v+0],P,3921069994),y=u(y,C,B,$,m[v+5],T,3593408605),$=u($,y,C,B,m[v+10],I,38016083),B=u(B,$,y,C,m[v+15],j,3634488961),C=u(C,B,$,y,m[v+4],P,3889429448),y=u(y,C,B,$,m[v+9],T,568446438),$=u($,y,C,B,m[v+14],I,3275163606),B=u(B,$,y,C,m[v+3],j,4107603335),C=u(C,B,$,y,m[v+8],P,1163531501),y=u(y,C,B,$,m[v+13],T,2850285829),$=u($,y,C,B,m[v+2],I,4243563512),B=u(B,$,y,C,m[v+7],j,1735328473),C=u(C,B,$,y,m[v+12],P,2368359562),y=p(y,C,B,$,m[v+5],N,4294588738),$=p($,y,C,B,m[v+8],F,2272392833),B=p(B,$,y,C,m[v+11],E,1839030562),C=p(C,B,$,y,m[v+14],O,4259657740),y=p(y,C,B,$,m[v+1],N,2763975236),$=p($,y,C,B,m[v+4],F,1272893353),B=p(B,$,y,C,m[v+7],E,4139469664),C=p(C,B,$,y,m[v+10],O,3200236656),y=p(y,C,B,$,m[v+13],N,681279174),$=p($,y,C,B,m[v+0],F,3936430074),B=p(B,$,y,C,m[v+3],E,3572445317),C=p(C,B,$,y,m[v+6],O,76029189),y=p(y,C,B,$,m[v+9],N,3654602809),$=p($,y,C,B,m[v+12],F,3873151461),B=p(B,$,y,C,m[v+15],E,530742520),C=p(C,B,$,y,m[v+2],O,3299628645),y=f(y,C,B,$,m[v+0],U,4096336452),$=f($,y,C,B,m[v+7],D,1126891415),B=f(B,$,y,C,m[v+14],R,2878612391),C=f(C,B,$,y,m[v+5],z,4237533241),y=f(y,C,B,$,m[v+12],U,1700485571),$=f($,y,C,B,m[v+3],D,2399980690),B=f(B,$,y,C,m[v+10],R,4293915773),C=f(C,B,$,y,m[v+1],z,2240044497),y=f(y,C,B,$,m[v+8],U,1873313359),$=f($,y,C,B,m[v+15],D,4264355552),B=f(B,$,y,C,m[v+6],R,2734768916),C=f(C,B,$,y,m[v+13],z,1309151649),y=f(y,C,B,$,m[v+4],U,4149444226),$=f($,y,C,B,m[v+11],D,3174756917),B=f(B,$,y,C,m[v+2],R,718787259),C=f(C,B,$,y,m[v+9],z,3951481745),y=r(y,w),C=r(C,b),B=r(B,x),$=r($,_);var A=h(y)+h(C)+h(B)+h($);return A.toLowerCase()};!function(){var e=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},t=function(e){return"[object String]"===Object.prototype.toString.call(e)};$.ajaxPrefilter(function(i,n,o){var r,a,s;if(i.type&&i.type.toUpperCase&&"POST"===i.type.toUpperCase())if(r=$.cookie("hxcsrf"),r||(a=$.now(),r=md5(a+e(1,1e8)),$.cookie("hxcsrf",r,{expires:(new Date).setTime(a+6e5)})),s=i.data,$.isPlainObject(s))s.hxcsrf=r;else if(t(i.data))s?-1===s.search("hxcsrf")?i.data+="&hxcsrf="+r:i.data=s.replace(/hxcsrf=([A-Za-z\d]*)/g,"hxcsrf="+r):i.data+="hxcsrf="+r;else if($.isArray(s)){var c=!1;$.each(s,function(e){"hxcsrf"===e.name&&(c=!0,e.value=r)}),c||s.push({name:"hxcsrf",value:r})}else s||(i.data="hxcsrf="+r)})}();var B={};B.Core={positionFooter:function(){var e=$("#footer");e.hasClass("fix")&&document.documentElement.clientHeight-e.outerHeight()<document.documentElement.offsetHeight?e.removeClass("fix"):document.documentElement.clientHeight>document.documentElement.offsetHeight&&e.addClass("fix")},isPlainObject:function(e){return!(!_.isObject(e)||_.isArray(e)||_.isFunction(e)||_.isElement(e)||_.isArguments(e)||_.isDate(e)||_.isRegExp(e))},newQuote:function(e){return B.Core.isPlainObject(e)?$.extend(!0,{},e):_.isArray(e)?$.extend(!0,[],e):e},setObject:function(e,t,i){var n=e;return"this"===t?e=i:(t=t.split("."),_.each(t,function(e,o){o<t.length-1?(_.isObject(n[e])||(n[e]={}),n=n[e]):o===t.length-1&&(n[e]=i)}),e)},getObject:function(e,t){var i=e,n;return"this"===t?n=i:(t=t.split("."),_.each(t,function(e,o){if(o<t.length-1)try{i=i[e]}catch(r){}else if(o===t.length-1)try{n=i[e]}catch(r){}}),n)},getObjectKeyList:function(e){var t=[];return _.each(e,function(e,i){/^_/g.test(i)||t.push(i)}),t},makeClass:function(){var e=function(){};return e.needMixinProperty={isClass:!0,toString:function(){return"B Class"},mixinProperty:function(){var self=this,e=!!self.superClass;return _.isUndefined(self.property)&&(self.property={}),_.each(self.needMixinProperty,function(t,i){self.needMixinProperty.hasOwnProperty(i)&&(e&&_.isFunction(t)&&_.isFunction(self.superClass[i])&&/(this|self)\._super/.test(t)?self.property[i]=function(e,t){var i=self.superClass[e];return function(){return this._super=i,t.apply(this,arguments)}}(i,t):e&&B.Core.isPlainObject(t)&&B.Core.isPlainObject(self.superClass[i])?$.extend(!0,self.property[i],self.superClass[i],t):self.property[i]=t,self[i]=self.property[i])}),delete self.needMixinProperty,self},mixinPrototype:function(){var self=this,e=!!self.superProto;return _.each(self.needMixinPrototype,function(t,i){self.needMixinPrototype.hasOwnProperty(i)&&(e&&_.isFunction(t)&&_.isFunction(self.superProto[i])&&/(this|self)\._super/.test(t)?self.prototype[i]=function(e,t){var i=self.superProto[e];return function(){return this._super=i,t.apply(this,arguments)}}(i,t):e&&B.Core.isPlainObject(t)&&B.Core.isPlainObject(self.superProto[i])?self.prototype[i]=$.extend(!0,{},self.superProto[i],t):self.prototype[i]=t)}),delete self.needMixinPrototype,self},reopenClass:function(t,i){return t=t||{},i=i||e,this.superClass=B.Core.newQuote(i.property),this.needMixinProperty=t,this.mixinProperty(),this},reopen:function(t,i){return t=t||{},i=i||e,this.superProto=B.Core.newQuote(i.prototype),this.needMixinPrototype=t,this.mixinPrototype(),this},extend:function(e){var self=this;e=e||{};var t=B.Core.makeClass();return t.reopenClass(self.property,self),t.reopen(self.prototype,self).reopen(e,self),t},create:function(e,t){var i=new this;_.each(e,function(e,t){B.Core.isPlainObject(i[t])?i[t]=$.extend(!0,{},i[t],e):i[t]=e});for(var n in i)/^\_self\_/g.test(n)&&(i[n.replace(/^\_self\_/g,"")]=B.Core.newQuote(i[n]));return _.isFunction(t)&&t(i),i.init(),i}},e.needMixinPrototype={constructor:e,init:function(){}},e.needMixinProperty.mixinProperty.apply(e,arguments),e.mixinPrototype(),e}},window.String.prototype.firstUpperCase=function(){var e=this.toString().replace(/^\w+/g,function(e){return e.substring(0,1).toUpperCase()+e.substring(1)});return e};var H=B.H={isLogin:function(){return null!==$.cookie("st_au")},lastLoginId:function(){return $.cookie("_last_login_id_")}};window.Function.prototype.mix=function(){var e=this,t=function(){return e.apply(this)};return t.needCalculate=!0,t},B.Object=B.Core.makeClass(),B.Object.reopenClass({}),B.Object.reopen({_self__watchStack:[],_self__mixStack:{},_self__watchSelfStack:[],init:function(){this._super();var self=this;self.mountMixValue(),self.mountBindValue(),self.watch("this",function(e,t,self){self.makeMix(),_.each(self._watchSelfStack,function(i){i(e,t,self)})},!0),self.makeMix(),self._watchStack[0].last=$.extend(!0,{},self),self.callIns()},use:function(e){var t=_.rest(arguments),i=B.Core.getObject(this,e);return _.isUndefined(i)?void 0:i.apply(this,t)},set:function(e,t){return B.Core.setObject(this,e,t),this.digest(),this},get:function(e){var t=B.Core.getObject(this,e);return t},mountMixValue:function(){var self=this,e=function(){self[this.mixKey]=this.mixFun.apply(self)};if(B.Core.isPlainObject(self))for(var t in self){var i=self[t];if(_.isFunction(i)&&i.needCalculate===!0){var n={mixFun:i,mixKey:t,main:e};self._mixStack[n.mixKey]=n}}},mountBindValue:function(){var self=this;for(var e in self){var t=self[e];_.isFunction(t)&&t.needBind===!0&&self.set(e,t(self,e))}},makeMix:function(){var self=this;_.each(self._mixStack,function(e){try{e.main()}catch(t){}})},setMix:function(e,t){var self=this,i=function(){self[this.mixKey]=this.mixFun(self)},n={mixFun:function(self){return t.apply(self)},mixKey:e,main:i};return self._mixStack[n.mixKey]=n,self.makeMix(self),this},watchSelf:function(e){this._watchSelfStack.push(e)},watch:function(e,t,i){var n,self=this;if(_.isString(e)){var o=e;e=function(self){var e=B.Core.getObject(self,o);return e}}var r={watchFn:e,listenerFn:t||function(){},valueEq:!!i,last:i?B.Core.newQuote(e(self)):e(self)};this._watchStack.push(r)},digest:function(){var e,t,self=this,i=[],n=[],o=10,r=function(e,t,i){return i?_.isEqual(e,t):e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},a=function(){var e=self._watchStack,t,n,o=!1;return _.each(e,function(e,a){var s=e.watchFn(self),c=e.last;e.valueEq&&(s=B.Core.newQuote(s,!0)),B.Core.isPlainObject(s)&&B.Core.isPlainObject(c)&&e.valueEq?(t=_.pick(s,B.Core.getObjectKeyList(s)),n=_.pick(c,B.Core.getObjectKeyList(c))):(t=s,n=c),r(t,n,e.valueEq)||(i.push(function(){return e.listenerFn(s,c,self)}),e.valueEq?e.last=B.Core.newQuote(s):e.last=s,o=!0)}),o};do e=a(),t=e&&!!o--;while(t);return _.each(i,function(e){e()}),this},callIns:function(e){var self=this,t="",i="",n=[],o="",r=$("[ba-ins]",e).not(".isTemplate [ba-ins],[template] [ba-ins]"),a=$("[ba-ins-get]",e).not(".isTemplate [ba-ins],[template] [ba-ins]"),s=function(e,t){var i;return _.each(t,function(e,n){-1!==e.search(/^@.+/g)&&(i=e.replace(/^@/g,""),t[n]=self._instruction.variable[i])}),n.unshift(e),-1===o.search(/\./)?t.unshift("ins."+o):t.unshift(o),t};_.isUndefined(self._instruction)&&(self._instruction={}),e||_.each(self._instruction,function(e,t){_.isEmpty(e.handler)||e.dom.off(e.event,e.handler),delete self._instruction[t]}),a.each(function(){var e=$(this),t=e.attr("ba-ins-get"),i,n;t=t.split(","),_.each(t,function(t){t=t.split(":"),2===t.length&&(i=t[0].replace(/^@/g,""),n="*"===t[1]?e.html():"val"===t[1]?e.val():e.attr(t[1]),_.isUndefined(self._instruction.variable)&&(self._instruction.variable={}),self._instruction.variable[i]=n)})}),r.each(function(e){var r=$(this),a=!1,c=Math.random(0,1);self._instruction[e+c]={dom:r},i=r.attr("ba-ins"),i=i.split(":"),o=i.shift(),n=i,t=o.split("~"),2===t.length?(o=t[1],t=t[0],n=s(r,n),function(){var i=n,o=function(){self.use.apply(self,i)};self._instruction[e+c].handler=o,r.on(t,o)}()):(t=null,n=s(r,n),self.use.apply(self,n)),self._instruction[e+c].ins=i,self._instruction[e+c].call=o,self._instruction[e+c].arg=n,self._instruction[e+c].event=t,self._instruction[e+c].dom=r})},confDev:window.devMode,confUseNoSuffixImg:!1,confProRootUrl:"http://www.beibei.com/",confDevRootUrl:"http://dev.beibei.com/",confProImgUrl:"http://www.beibei.com/upload/",confDevImgUrl:"http://dev.beibei.com/upload/",confProGetTimeUrl:"http://d.beibei.com/ts.json",confDevGetTimeUrl:"http://d.beibei.com/ts.json",confMsg:{netError:"网络繁忙，请稍后重试",apiError:"网络繁忙，请稍后重试",apiCode404:"请求未找到，请联系客服或稍后重试",apiCode500:"请求发生错误，请联系客服或稍后重试"},"package":{loaded:{}},store:{timeDifference:0,serviceTime:0},ins:{reloadPage:function(){window.location.reload()}},renderView:function(e,t){var self=this,i=function(e,t){var n=e.find("[op-value]").add(e.filter("[op-value]"));n.each(function(){var e=$(this),i=e.attr("op-value");if(_.isUndefined(e.attr("op-attr")))e.html(B.Core.getObject(t,i));else{var n=e.attr("op-attr").split(",");i=i.split(","),_.each(n,function(n,o){if("*"===n)return void e.html(B.Core.getObject(t,i[o]));if("value"===n&&e.is("input"))e.val(B.Core.getObject(t,i[o]));else{var r=B.Core.getObject(t,i[o]);_.isBoolean(r)?r===!0&&e.prop(n,n):e.attr(n,r)}})}}),n.find("[op-select]").each(function(){var e=$(this),i=e.attr("op-select"),n=B.Core.getObject(t,i);e.find('option[value="'+n+'"]').attr("selected","selected")}),e.find("[op-each]").add(e.filter("[op-each]")).each(function(){var e=$(this),n=B.Core.getObject(t,e.attr("op-each")),o=e.attr("op-each-item");e.html(""),(_.isArray(n)||_.isObject(n))&&_.each(n,function(t,n){var r=self.getTemplate(o);e.append(r),i(r,t)})})};i(e,t)},getTemplate:function(e){var t=null;return t=_.isUndefined(this["template"+e.firstUpperCase()])?$('[template="'+e+'"]').clone():this["template"+e.firstUpperCase()].clone(),t.attr("template-display")?t.css("display",t.attr("template-display")):t.show(),t.attr("template")&&t.removeAttr("template"),t.attr("template-display")&&t.removeAttr("template-display"),t},useView:function(){return this.renderView}.mix(),fn:{analyzeErrorMessage:function(e){var self=this,t="";return _.isString(e)?t=e:(_.each(e,function(e,i){t+=e+"<br/>"}),t=t.replace(/<br\/>$/g,"")),t},deRound:function(e,t){var i;return t=Number(t),i=Math.pow(10,_.isNaN(t)?4:t+2),Math.round(e*i)/i},getFormatPrice:function(e){e=_.isUndefined(e)?0:this.fn.deRound(e);var t=e%100;return e/=100,0===t?e+=".00":t%10===0&&(e+="0"),String(e)},getFormatTimeleft:function(e){return e>31536e6?Math.ceil(e/31536e6)+"年":e>864e5?Math.ceil(e/864e5)+"天":e>36e5?Math.ceil(e/36e5)+"小时":e>6e4?Math.ceil(e/6e4)+"分钟":e>0?Math.ceil(e)+"秒":void 0},getFormatDiscount:function(e,t){var i=e/t;return i>=1?!1:.1>=i?1:Math.floor(100*i)/10},getUrlParam:function(){var e=window.location.search,t=function(e){for(var t={},i=e.substr(1).split("&"),n=i.length,o=[];n--;)o=i[n].split("="),t[o[0]]=o[1];return t},i=-1!==e.indexOf("?")?t(e):{},n,o;switch(arguments.length){case 0:break;case 1:if(n=arguments[0],_.isString(n))return i[n];if(_.isFunction(n))return o=n,o(i),i;break;case 2:if(n=arguments[0],o=arguments[1],_.isString(n)&&_.isFunction(o))return o(i[n]),i[n]}return i},getServerTime:function(e){var self=this;$.ajax({url:window.devMode?self.confDevGetTimeUrl:self.confProGetTimeUrl,type:"GET",dataType:"jsonp",crossDomain:!0}).done(function(t){e(1e3*t.ts)})},specifiedDateFn:function(e,t,i,n){var o=(new Date).getTime();e=null!==e?moment(e)._d.getTime():!1,t=null!==t?moment(t)._d.getTime():!1,e!==!1&&t!==!1&&o>=e&&t>o||e!==!1&&t===!1&&o>=e||e===!1&&t!==!1&&t>o||e===!1&&t===!1?i.apply(this):n.apply(this)}}}),B.Widget=B.Object.extend({init:function(){var self=this;if(self._super(),self.templateMain&&1===self.templateMain.length){self.templateMain=self.templateMain.clone();for(var e in self)if(0===e.search(/view\w+/g)){var t=self[e];self[e]=self.templateMain.find('[wg-view="'+t+'"]'),0===self[e].length&&(self[e]=self.templateMain.filter('[wg-view="'+t+'"]'))}}self.onEvent(),self.onWatch()},conf:{},stName:"",stId:"",onWatch:function(){},onEvent:function(){},api:{},view:{},fn:{}}),B.Widget.reopenClass({create:function(e){e=e||{};var self=this,t=self._super({conf:e,stId:self.prototype.stName+String(_.random(1e8,99e7))+(new Date).getTime()});return t}}),B.widgetMessageNotification=B.Widget.extend({init:function(){var self=this;self._super(),self.use("view.renderMessageBox")},conf:{type:"info",closeTime:5e3,iconType:"default",apparent:!1,maxMessageNum:4},stName:"widgetMessageNotification",stMessageNum:0,methodSend:function(e,t){var self=this,i;t=t||{},t=$.extend(!0,{},self.conf,t);var n={danger:"Danger",success:"Success",warning:"Warning",info:"Primary"},o=self["templateMessage"+n[t.type]].clone();if(self.renderView(o,{msg:e}),self.use("view.renderMessageItem",o,t),self.viewMessageBox.append(o),i="border-box"===o.css("box-sizing")?o.outerHeight():o.height(),setTimeout(function(){o.css({transform:"rotateX(0deg) translateZ(45px) scale(1)",height:i})}),self.stMessageNum=self.viewMessageBox.children('[wg-view^="message"]').length,self.stMessageNum>t.maxMessageNum)for(var r=0;r<self.stMessageNum-t.maxMessageNum;r++)self.use("view.delMessage",r);return t.closeTime>0&&setTimeout(function(){self.use("view.delMessage",o)},t.closeTime),this},templateMain:$('<div wg-view="messageBox"></div>'),templateMessagePrimary:$('<div wg-view="messagePrimary"><span op-value="msg"></span><span wg-view="messageClose"><i class="iconfont">&#xf00b3;</i></span></div>'),templateMessageWarning:$('<div wg-view="messageWarning"><span op-value="msg"></span><span wg-view="messageClose"><i class="iconfont">&#xf00b3;</i></span></div>'),templateMessageDanger:$('<div wg-view="messageDanger"><span op-value="msg"></span><span wg-view="messageClose"><i class="iconfont">&#xf00b3;</i></span></div>'),templateMessageSuccess:$('<div wg-view="messageSuccess"><span op-value="msg"></span><span wg-view="messageClose"><i class="iconfont">&#xf00b3;</i></span></div>'),viewMessageBox:"messageBox",onWatch:function(){},onEvent:function(){var self=this;self._super(),self.viewMessageBox.on("mouseover",'[wg-view^="message"]',function(){$(this).find('[wg-view="messageClose"]').css({right:"0"})}).on("mouseout",'[wg-view^="message"]',function(){$(this).find('[wg-view="messageClose"]').css({right:"-24px"})}).on("click",'[wg-view="messageClose"]',function(){var e=self.viewMessageBox.children('[wg-view^="message"]').index($(this).parent()),t=self.viewMessageBox.children('[wg-view^="message"]:eq('+e+")");self.use("view.delMessage",t)})},api:{},view:{renderMessageBox:function(){var self=this;$("body").append(self.viewMessageBox),self.viewMessageBox.css({position:"fixed",top:"0",left:"50%",width:"400px","margin-left":"-200px",padding:"6px 10px","z-index":"9999",opacity:"0.97"})},renderMessageItem:function(e,t){var self=this,i=t.type,n="#428bca";if("info"===i?n="#428bca":"danger"===i?n="#d9534f":"warning"===i?n="#f0ad4e":"success"===i&&(n="#5cb85c"),e.css({margin:"4px 0",color:"#fff",padding:"6px 28px 6px 10px","border-radius":"4px","line-height":"1.3em","font-size":"13px",position:"relative",transform:"rotateX(-90deg) translateZ(20px) scale(1)",transition:"0.6s",overflow:"hidden",background:n}),e.find("p").css({"margin-bottom":"0"}),e.find('[wg-view="messageClose"]').css({position:"absolute",display:"block",right:"-24px",top:"0",width:"24px",height:"100%",cursor:"pointer",transition:"right 0.15s",background:"rgba(255, 255, 255, 0.2)",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#ffffff20,endColorstr=#ffffff20)"}),e.find('[wg-view="messageClose"] i').css({"font-size":"12px",position:"absolute",top:"50%","margin-top":"-8px",left:"50%","margin-left":"-6px"}),t.iconType!==!1){var o=$('<i class="iconfont"></i>');"default"===t.iconType?"success"===i?o.html("&#xf0156;"):"danger"===i?o.html("&#xf0155;"):"warning"===i?o.html("&#xf0153;"):"info"===i&&o.html("&#xf0142;"):o.html(t.iconType),e.find("span:first").prepend(o),e.find(o).append(" ")}t.apparent&&(self.viewMessageBox.find(".isApparent").fadeOut(500,function(){$(this).remove()}),e.addClass("isApparent"),e.css({width:"400px",position:"fixed",top:"50%",padding:"12px 28px 12px 10px","margin-top":"-50px",left:"50%","margin-left":"-200px","text-align":"center","font-size":"18px"}),e.find("span i.iconfont").css({"font-size":"18px"}),e.find('[wg-view="messageClose"] i.iconfont').css({"margin-top":"-11px","font-size":"12px"}))},delMessage:function(e){var self=this,t;t=_.isNumber(e)?self.viewMessageBox.children('[wg-view^="message"]:not(.isApparent):eq('+e+")"):e,t.css({height:"0",padding:"0 28px 0 10px",opacity:"0",transition:"0.4s"}),setTimeout(function(){t.remove()},400)}},fn:{}}),B.Page=B.Object.extend({init:function(){var self=this;self._super(),$.cookie.defaults={path:"/",domain:"beibei.com"},self.queryView(),self.queryTemplate(),self.onEvent(),self.onWatch(),self.use("fn.environmentTip"),_.each(self.widget,function(e,t){_.isUndefined(B["widget"+t.firstUpperCase()])&&(self["widget"+t.firstUpperCase()]=B["widget"+e.use.firstUpperCase()].create(e.conf))}),B.Core.positionFooter(),self.use("fn.initLoginStatus"),self.use("fn.autoLogin"),self.holdImgLazyLoad||self.use("fn.setImgLazyLoad")},viewActionBackLink:$(".action-back,.view-ActionBack"),viewLoginStatus:null,pageData:{},pageId:null,store:{},holdImgLazyLoad:!1,widget:{publicMessageNotification:{use:"messageNotification",conf:{}}},onWatch:function(){},onEvent:function(){var self=this;$(window).on("resize",B.Core.positionFooter),$(document).on("mousedown",self.viewActionBackLink.selector,function(){var e=$(this),t=window.location.href;if(-1===t.indexOf("member/")){var i=e.attr("href");-1===i.indexOf("done=")&&(i+=-1===i.indexOf("?")?"?done=":"&done=",e.attr("href",i+encodeURIComponent(t)))}}),$(document).on("mouseover",".dropdown, .nav-cart",function(){$(this).addClass("hover")}).on("mouseout",".dropdown, .nav-cart",function(){$(this).removeClass("hover")})},api:{},view:{},fn:{setImgLazyLoad:function(e){e=e||$("img.lazy"),e.lazyload({threshold:200,data_attribute:"src",failure_limit:5})},initLoginStatus:function(){var self=this,e=self.viewLoginStatus.attr("data-status"),t=$.cookie("_m_gd_")||1,i=B.H.lastLoginId();"0"===e&&B.H.isLogin()===!0&&null!==i&&(self.viewLoginStatus.html('<a class="lv-icon lv'+t+'" c-bname="通顶菜单-用户等级图标" clog c-emit="click" c-et="event" c-etl="" href="'+(self.confDev?"http://i-dev.beibei.com/member/grade.html":"http://i.beibei.com/member/grade.html")+'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a><a class="striking-link" c-bname="通顶菜单-用户名" clog c-emit="click" c-et="event" c-etl="" href="'+(self.confDev?"http://i-dev.beibei.com/":"http://i.beibei.com")+'">'+i+'</a> &nbsp; <a c-bname="通顶菜单-退出" clog c-emit="click" c-et="event" c-etl="" href="'+(window.devMode?"http://dev.beibei.com/member/logout.html":"http://www.beibei.com/member/logout.html")+'" rel="nofollow">[退出]</a>'),self.viewLoginStatus.after('<li class="seg"></li><li><a c-bname="通顶菜单-消息" clog c-emit="click" c-et="event" c-etl="" href="'+(window.devMode?"http://i-dev.beibei.com/message/index.html":"http://i.beibei.com/message/index.html")+'">消息</a><li class="seg"></li><li><a c-bname="通顶菜单-我的订单" clog c-emit="click" c-et="event" c-etl="" href="'+(window.devMode?"http://i-dev.beibei.com/trade/order/lists.html":"http://i.beibei.com/trade/order/lists.html")+'">我的订单</a></li><li class="seg"></li><li><a c-bname="通顶菜单-我的贝贝" clog c-emit="click" c-et="event" c-etl="" href="'+(window.devMode?"http://i-dev.beibei.com/":"http://i.beibei.com/")+'">我的贝贝</a></li>'))},autoLogin:function(){var self=this,e=window.document.cookie,t=0,i,n={login:function(){$.ajax({url:self.confDev?"http://dev.beibei.com/member/boot":"http://d.beibei.com/member/boot",type:"GET",dataType:"jsonp"}).done(function(){self.use("fn.initLoginStatus")})}};t=$.cookie("_remember_me_"),i=$.cookie("st_au"),"1"===t&&null===i&&n.login()},environmentTip:function(){if(window.devMode&&window.showEnvironmentLogo){$(document).on("mouseover","#environmentTip",function(e){e.preventDefault();var t=$(this),i=t.offset().left;0===i?t.css("left","auto").css("right",0):t.css("right","auto").css("left",0)});var e='<img id="environmentTip" src="http://b0.hucdn.com/img/admin/evn.png" width="154" height="50" style="position: fixed;top: 0;z-index: 110;" />';$("body").append(e)}}},useApi:function(e,t,i){var self=this,n={},o=$.extend(!0,{noHxcsrf:!1,devUrl:null,proUrl:null,type:"POST",dataType:"json",async:!0,done:function(){},fail:function(){},always:function(){}},self.api[e]),r=!1;$.extend(n,{done:function(){},fail:function(){},always:function(){}},i),o.noHxcsrf===!1&&(t=$.extend(!0,{hxcsrf:g.__t__},t)),o.url=self.confDev?o.devUrl:o.proUrl,o.data=t,o.statusCode={500:function(){r||(self.widgetPublicMessageNotification.methodSend(self.use("fn.analyzeErrorMessage",self.confMsg.apiCode500||self.confMsg.netError),{type:"danger"}),r=!0)},404:function(){r||(self.widgetPublicMessageNotification.methodSend(self.use("fn.analyzeErrorMessage",self.confMsg.apiCode404||self.confMsg.netError),{type:"danger"}),r=!0)}},$.ajax(o).done(function(){o.done.apply(self,arguments),n.done.apply(self,arguments),self.catchAjaxError.apply(self,arguments)}).fail(function(e){o.fail.apply(self,arguments),n.fail.apply(self,arguments),r||(500===e.status?self.widgetPublicMessageNotification.methodSend(self.use("fn.analyzeErrorMessage",self.confMsg.apiCode500||self.confMsg.netError),{type:"danger"}):404===e.status?self.widgetPublicMessageNotification.methodSend(self.use("fn.analyzeErrorMessage",self.confMsg.apiCode404||self.confMsg.netError),{type:"danger"}):self.widgetPublicMessageNotification.methodSend(self.use("fn.analyzeErrorMessage",self.confMsg.apiFail||self.confMsg.netError),{type:"danger"}),r=!0)}).always(function(e){o.always.apply(self,arguments),n.always.apply(self,arguments),302===Number(e.success)?window.location.href=e.url||(self.confDev?self.confDevRootUrl:self.confProRootUrl):500===Number(e.success)&&e.ignore!==!0&&self.widgetPublicMessageNotification.methodSend(self.use("fn.analyzeErrorMessage",e.message||self.confMsg.netError),{type:"danger"})})},catchAjaxError:function(e){var self=this;e.success===!1&&302!==Number(e.success)&&500!==Number(e.success)&&e.ignore!==!0&&self.widgetPublicMessageNotification.methodSend(self.use("fn.analyzeErrorMessage",e.message||self.confMsg.netError),{type:"danger"})},queryView:function(e){!_.isUndefined(e)&&_.isArray(e)&&0!==e.length||(e=!1);var self=this,t=self._viewQueryCache,i,n,o=function(e){return e&&e.selector?e.selector:""};if(_.isUndefined(t)){t={};for(var r in self)0===r.search(/view\w+/g)&&(n=r.replace(/^view/,""),i=_.isString(self[r])?self[r]:_.isNull(self[r])?".view-"+n:o(self[r]),!(_.isString(self[r])||_.isNull(self[r])||_.isUndefined(self[r]))&&self[r].length>0||(t[n]=i,self[r]=$(i+":not(.isTemplate "+i+")")))}else if(e!==!1){var a;_.each(e,function(e,i){n=e.replace(/^view/,""),a=t[n],a&&(self["view"+n]=$(a+":not(.isTemplate "+a+")"))})}else _.each(t,function(e,t){self["view"+t]=$(e+":not(.isTemplate "+e+")")});self._viewQueryCache=t},queryTemplate:function(){var self=this;$("[template]").each(function(){var e=$(this),t=e.attr("template");self["template"+t.firstUpperCase()]=e})},renderView:function(){var self=this,e=arguments[2];if(_.isUndefined(e))e=!0,self._super.apply(self,arguments);else{var t=_.initial(arguments);self._super.apply(self,t)}e===!0?self.queryView():_.isArray(e)&&self.queryView(e)}}),B.Page.reopenClass({create:function(e){return this._super(e,function(e){window.Page=e}),window.Page}}),B.initPage=function(){if(window.originPageId=window.pageId,!_.isUndefined(pageData)&&!_.isUndefined(pageId)){var e=pageId,t=!1,i;for(e=e.replace(/\_/g,""),e=e.replace(/\.\w+$/g,""),e=e.split("/"),e=_.map(e,function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}),pageId=i="page"+e.join("");!t&&"page"!==i;)_.isUndefined(B[i])?i=i.replace(/[A-Z][a-z0-9]*?$/g,""):t=!0;"page"===i&&(i="Page");try{B[i].reopen({pageData:pageData,pageId:pageId})}catch(n){if(window.devMode)throw n}}},$(function(){B.initPage()}),window.bbclick=function(e){var t=$.cookie("bblog-debug")||!1;e=$.extend({url:window.devMode?"http://c1-dev.hucdn.com/p1.gif":"http://c1.hucdn.com/p1.gif"},e);var i=[],n={},o=window.location.href,r=window.browser.name,a=window.browser.version,s=window.browser.alias||"";$.cookie("st_au")||$.cookie("tem-au")||$.cookie("tem-au","ul"+(String(+new Date).slice(-6)+_.random(1e8,9e8)));var c={markPre:function(e,t){var i=window.location.href.replace(/^(.+?)\#(.+)$/g,"$1");$.cookie("pre-rid",e),$.cookie("pre-sid",t),$.cookie("pre-url",i)},getPre:function(){window.document.referrer===$.cookie("pre-url")&&(n.rid=$.cookie("pre-rid"),n.sid=$.cookie("pre-sid")),$.removeCookie("pre-url")},getLog:function(e){e&&(e=[].concat(e));var t=[];_.each(e,function(e){t.push('[c-rid="'+e+'"]')});var i=$("body");t.length>0&&(i=$(t.join(","))),i.find("[clog]:visible").not("[clog-get]").each(function(){var e=$(this),t=e.attr("c-emit");t&&(t=t.split(";"),_.each(t,function(t){var i={rid:e.closest("[c-rid]").attr("c-rid")||0,entity_type:e.attr("c-et")||"null",entity_list:e.attr("c-etl").split(";")||[]},n={block_name:e.attr("c-bname")};if(void 0!==e.attr("c-pos")&&(n={block_name:e.attr("c-bname"),position:e.attr("c-pos")}),t=$.trim(t),/^show/.test(t))i.et=t.split(":")[1]||"show",c.addLog(i,n);else if(/^click/.test(t)){var o;/click\[.+?\]/.test(t)&&(o=t.replace(/^.*\[(.+?)\].*$/g,"$1")),e.on("click",o?o:"",function(){var e=0;$.cookie("_logged_")&&(e=$.cookie("_logged_").split("").pop()),c.markPre(i.rid,e),i.et=t.split(":")[1]||"click",c.addLog(i,n),c.sendLog()})}}),e.attr("clog-get",!0))})},sendLog:function(){var o={};_.each(i,function(e){var t=e.rid+"/"+e.et+"/"+e.entity_type;o[t]?o[t].entity_list?o[t].entity_list=o[t].entity_list.concat(e.entity_list):o[t].entity_list=e.entity_list:o[t]=e}),_.each(o,function(i){if(i.entity_list&&i.entity_list.length){i.entity_list=i.entity_list.join(";");try{t&&console.log("send log",i)}catch(o){}n.rid&&n.sid&&(i.prid=n.rid,i.psid=n.sid),$.ajax({url:e.url,dataType:"jsonp",type:"GET",cache:!0,jsonpCallback:"c",data:i})}}),i=[]},addLog:function(e,t){var self=this,n=self.toolLog(),c=$.extend(!0,{source:"PC",url:n.url,url_pattern:n.url_pattern,pre_url:n.pre_url,preurl_pattern:n.preurl_pattern},t);e=$.extend(!0,{hxid:$.cookie("hxid")||$.cookie("JSESSIONID"),et:"null",rid:0,sid:0,xid:$.cookie("st_au")||$.cookie("tem-au"),entity_type:"null",entity_list:[],browser_url:o,browser_name:r,browser_version:a,browser_alias:s,json:JSON.stringify(c)},e),$.cookie("_logged_")&&(e.sid=$.cookie("_logged_").split("").pop()),i.push(e)},toolLog:function(){var e=window.location,t=e.href,i="",n="",o="",r=function(e){return e.split(/\/search\/item/).length>1?e.split(/\/search\/item/)[0]+"/search/item":e.split(".html").length>1?e.split(/\d{3}/).length>1?e.split(/\d{3}/)[0]:e.split(".html")[0]+".html":e.split(/com\W{2}/).length>1?e.split(/com\W{2}/)[0]+"com":e};return i=r(t),n=document.referrer||"",o=n?r(n)||"":"",{url:t,url_pattern:i,pre_url:n,preurl_pattern:o}},initLog:function(){var self=this,t=self.toolLog(),i={source:"PC",url:t.url,url_pattern:t.url_pattern,pre_url:t.pre_url,preurl_pattern:t.preurl_pattern};$.ajax({url:e.url,dataType:"jsonp",type:"GET",cache:!0,jsonpCallback:"c",data:{hxid:$.cookie("hxid")||$.cookie("JSESSIONID"),et:"pageshow",xid:$.cookie("st_au")||$.cookie("tem-au"),browser_url:o,browser_name:r,browser_version:a,browser_alias:s,json:JSON.stringify(i)}})}};return c.initLog(),c.getPre(),c.getLog(),c.sendLog(),{add:function(e,t){return c.addLog(e,t),this},get:function(e){return c.getLog(e),this},pre:function(){return n},list:function(){return i},send:function(){return c.sendLog(),this}}},window.bb=window.bbclick(),B.widgetCartBox=B.Widget.extend({init:function(){var self=this;self.conf.container=$(self.conf.container),self.conf.trigger=$(self.conf.trigger),self._super(),"trigger"===self.conf.mode&&(self.conf.trigger.css({position:"relative"}),self.conf.container.css({position:"absolute",top:self.conf.triggerPosition[0],right:self.conf.triggerPosition[1],bottom:self.conf.triggerPosition[2],left:self.conf.triggerPosition[3]}),self.conf.container.hide()),self.use("view.renderMain"),null===$.cookie("cart_c")?self.use("api.getCartInfo"):setTimeout(function(){self.stCartNumFromCookie=+$.cookie("cart_c"),self.digest().digest()},500)},conf:{mode:"normal",container:null,trigger:null,triggerEvent:"hover",triggerPosition:[0,0,0,0],
maxItemNum:5,direction:"top",needTitle:!0,hoverGetData:!1,settleBtnLink:window.devMode?"http://trade-dev.beibei.com/cart/mine":"http://trade.beibei.com/cart/mine",settleBtnText:'<i class="iconfont">&#xf0179;</i>去购物车结算',showMoreBtnLink:window.devMode?"http://trade-dev.beibei.com/cart/mine":"http://trade.beibei.com/cart/mine",showMoreBtnText:"查看全部",shoppingUrl:window.devMode?"http://dev.beibei.com/":"http://www.beibei.com/",cbAfterGetData:function(){}},stName:"widgetCartBox",stCartInfo:null,stCartNumFromCookie:0,stCartItemNum:function(){return _.size(this.stCartInfo)||this.stCartNumFromCookie}.mix("=stCartInfo","stCartNumFromCookie"),stCartItemPrice:function(){var e=0;return _.each(this.stCartInfo,function(t){e+=t.price*t.num}),e}.mix("=stCartInfo"),stMouseoverGetCartInfo:!1,methodUpdate:function(){this.use("api.getCartInfo",!0)},templateMain:$('<div wg-view="main"><div wg-view="title" op-value="title"></div><ul wg-view="list" op-each="cartInfo" op-each-item="ListItem"></ul><div wg-view="footer"><div wg-view="footerTotal">小计：<span wg-view="footerTotalNum" op-value="totalPrice"></span></div><div wg-view="footerBtnBar"><a href="javascript:;" wg-view="footerSettleBtn" op-value="settleBtnText,settleBtnLink" op-attr="*,href"></a></div></div><div wg-view="footerBg"></div></div>'),templateListItem:$('<li wg-view="item"><a href="#" wg-view="imglink" op-value="itemLink" op-attr="href"><img wg-view="img" op-value="imgUrl" op-attr="src" /></a><a href="#" wg-view="name" op-value="title,itemLink" op-attr="*,href"></a><p wg-view="sku" op-value="sku_props"></p><p wg-view="price" op-value="price"></p></li>'),templateListShowMoreBtn:$('<li><a href="javascript:;" class="cartBox-ListShowMoreBtn" op-value="showMoreBtnText,showMoreBtnLink" op-attr="*,href"></a></li>'),viewMain:"main",viewTitle:"title",viewList:"list",viewFooter:"footer",viewFooterTotal:"footerTotal",viewFooterTotalPrice:"footerTotalPrice",viewFooterTotalNum:"footerTotalNum",viewFooterBtnBar:"footerBtnBar",viewFooterSettleBtn:"footerSettleBtn",viewFooterBg:"footerBg",onWatch:function(){var self=this;self._super(),self.watch("stCartInfo",function(){self.use("view.renderMain")},!0)},onEvent:function(){var self=this;self._super(),self.viewList.on("mouseover","li:not(.empty-cart,.loading-cart)",function(){$(this).css({background:"#f6f6f6"})}).on("mouseout","li:not(.empty-cart,.loading-cart)",function(){$(this).css({background:"#fff"})}),self.conf.hoverGetData!==!1&&$(self.conf.hoverGetData).on("mouseover",function(){null!==self.stCartInfo||self.stMouseoverGetCartInfo||(self.stMouseoverGetCartInfo=!0,self.use("api.getCartInfo"))}),"trigger"===self.conf.mode&&"hover"===self.conf.triggerEvent?self.conf.trigger.on("mouseover",function(){null!==self.stCartInfo||self.stMouseoverGetCartInfo||(self.stMouseoverGetCartInfo=!0,self.use("api.getCartInfo")),self.conf.container.show()}).on("mouseout",function(){self.conf.container.hide()}):"trigger"===self.conf.mode&&"click"===self.conf.triggerEvent&&self.conf.trigger.on("click",function(){1===self.conf.container.filter(":hidden").length?(null===self.stCartInfo&&self.use("api.getCartInfo"),self.conf.container.show()):self.conf.container.hide()}),self.viewList.on("mouseenter",".empty-cart",function(){var e=self.viewList.find(".empty-cart span.note"),t=self.viewList.find(".empty-cart span.shopping");document.all&&!document.addEventListener||(e.css({left:"100%"}),t.css({left:"0"}))}).on("mouseleave",".empty-cart",function(){var e=self.viewList.find(".empty-cart span.note"),t=self.viewList.find(".empty-cart span.shopping");document.all&&!document.addEventListener||(e.css({left:"0"}),t.css({left:"100%"}))}),self.viewList.on("click",".empty-cart",function(){window.location.href=self.conf.shoppingUrl})},api:{getCartInfo:function(e){e=e||!1;var self=this;return B.H.isLogin()===!1?(self.set("stCartInfo",{}),void self.conf.cbAfterGetData()):void(e||_.isUndefined(Page.store.cartInfo)?$.ajax({url:Page.confDev?"http://trade-dev.beibei.com/cart/ajax_mine.html":"http://trade.beibei.com/cart/ajax_mine.html",type:"POST",dataType:"jsonp"}).done(function(e){if(e.success===!0){var t={};_.each(e.data.cart_vo_map,function(e){_.each(e,function(e,i){t[e.id]=e})}),Page.set("store.cartInfo",t),self.set("stCartInfo",t),self.digest(),self.conf.cbAfterGetData()}else Page.set("store.cartInfo",{}),self.set("stCartInfo",{}),self.digest()}):self.set("stCartInfo",Page.store.cartInfo))}},view:{renderMain:function(){var self=this,e=self.viewMain,t="none",i=self.conf.container.height(),n=self.conf.container.width();e.attr("widget-id",self.stId).attr("widget-name",self.stName).css({background:"transparent",border:"1px solid #FF5482",width:n,"text-align":"left",color:"#000","z-index":"29",cursor:"default",position:"relative"}),self.conf.container.html(e),self.conf.needTitle&&self.use("view.renderTitle"),self.use("view.renderList"),self.use("view.renderFooter")},renderTitle:function(){var self=this,e=self.viewTitle,t;t=self.stCartItemNum>0?'<i class="iconfont">&#xf0148;</i> 购物车中有<b>'+self.stCartItemNum+"件</b>商品":null===self.stCartInfo?'<i class="iconfont">&#xf0179;</i> 正在载入购物车...':'<i class="iconfont">&#xf0179;</i> 购物车是空的',e.css({padding:"2px 15px","border-bottom":"1px solid #e3e3e3",background:"#FFF9FB","font-size":"13px","text-align":"center",color:"#FF5482"}),self.renderView(e,{title:t}),e.find("b").css({color:"#e53363"})},renderList:function(){var self=this,e=self.viewList;if(e.css({background:"#fff","overflow-y":"hidden"}),_.size(self.stCartInfo)>0?self.use("view.renderListItem"):null===self.stCartInfo?self.use("view.renderListItemForLoading"):self.use("view.renderListItemForEmpty"),self.viewList.find("li:gt("+(self.conf.maxItemNum-1)+")").remove(),self.stCartItemNum>self.conf.maxItemNum){var t=self.getTemplate("ListShowMoreBtn");self.renderView(t,{showMoreBtnText:'<i class="iconfont">&#xf0161;</i> '+self.conf.showMoreBtnText,showMoreBtnLink:self.conf.showMoreBtnLink}),t.css({width:"100%",padding:"0","text-align":"center"}),t.find("a").css({width:"100%",padding:"0","text-align":"center",border:"0","font-weight":"normal","font-size":"14px",color:"#aaa",height:"37px","line-height":"37px",display:"block"}),self.viewList.append(t)}e.find("li:last").css({"border-bottom":"none"})},renderListItemForEmpty:function(){var self=this;self.viewList.html(""),self.use("fn.specifiedDateFn","2014-5-27","2014-6-3 23:59:59",function(){this.viewList.append('<li class="empty-cart"><span class="note">购物车还是空的</span><span class="shopping"><i class="iconfont">&#xf0178;</i> 去专场逛逛</span></li>')},function(){this.viewList.append('<li class="empty-cart"><span class="note">赶快去挑选商品吧！</span><span class="shopping"><i class="iconfont">&#xf0178;</i> 去专场逛逛</span></li>')}),self.viewList.find(".empty-cart").css({"font-size":"16px",color:"#99918c",padding:"80px 0","text-align":"center",position:"relative",overflow:"hidden","list-style":"none",cursor:"pointer"}),self.viewList.find(".empty-cart span.note").css({width:"100%",display:"block",transition:"all 0.2s",position:"absolute",left:"0",top:"80px",margin:"0",padding:"0"}),self.viewList.find(".empty-cart span.shopping").css({width:"100%",display:"block",transition:"all 0.2s",position:"absolute",left:"-100%",top:"80px"}),document.all&&!document.addEventListener&&(self.viewList.find(".empty-cart span.note").css({left:"0px"}),self.viewList.find(".empty-cart span.shopping").remove())},renderListItemForLoading:function(){var self=this;self.viewList.html(""),self.viewList.append('<li class="loading-cart"><img src="http://b0.hucdn.com/img/common/loading.gif" /></li>'),self.viewList.find(".loading-cart").css({padding:"20px 0","text-align":"center",position:"relative",overflow:"hidden","list-style":"none",cursor:"default"}),document.all&&!document.addEventListener&&(self.viewList.find(".empty-cart span.note").css({left:"0px"}),self.viewList.find(".empty-cart span.shopping").remove())},renderListItem:function(){var self=this,e=B.Core.newQuote(self.stCartInfo);_.each(e,function(e,t){e.sku_props=e.sku_props.replace(/\d+:\d+:/g,"").replace(/;/g," "),e.price="&yen;"+self.use("fn.getFormatPrice",e.price)+'<br/><span wg-view="num"> x'+e.num+"</span>",e.itemLink=window.devMode?"http://dev.beibei.com/detail/"+e.event_id+"-"+e.product_id+".html":"http://www.beibei.com/detail/"+e.event_id+"-"+e.product_id+".html",e.imgUrl=e.img+"!60x60.jpg"}),self.renderView(self.viewList,{cartInfo:e}),self.viewList.find("li").css({padding:"12px","list-style":"none",position:"relative","border-bottom":"1px dotted #bebab7",overflow:"hidden",height:"60px"}),self.viewList.find('[wg-view="img"]').css({border:"2px solid #ccc",background:"#fff",padding:"2px",width:"50px",height:"50px",position:"relative","z-index":"4"}),self.viewList.find('[wg-view="name"]').css({position:"absolute",left:"0px",top:"15px",padding:"0 10px 0 80px","line-height":"1.2em",height:"30px",overflow:"hidden","font-size":"13px",margin:"0",width:"50%","z-index":"3"}),self.viewList.find('[wg-view="sku"]').css({position:"absolute",color:"#aaa",left:"0px",top:"52px",padding:"0 10px 0 80px","line-height":"1.2em",height:"14px",overflow:"hidden","font-size":"12px",margin:"0",width:"50%"}),self.viewList.find('[wg-view="price"]').css({position:"absolute",color:"#FF5482",right:"15px",top:"25px",overflow:"hidden","font-size":"16px","padding-left":"80px",margin:"0",width:"30%","line-height":"1em","text-align":"right"}),self.viewList.find('[wg-view="num"]').css({display:"inline",color:"#888","font-size":"13px"})},renderFooter:function(){var self=this,e={};e.totalPrice="&yen;"+self.use("fn.getFormatPrice",self.stCartItemPrice),e.totalNum=self.stCartItemNum,e.settleBtnText=self.conf.settleBtnText,e.settleBtnLink=self.conf.settleBtnLink,self.renderView(self.viewFooter,e),self.viewFooter.css({height:"47px","border-top":"1px solid #e3e3e3",background:"#FFF9FB"}),self.viewFooterTotal.css({"font-size":"13px",color:"#666",padding:"10px 15px",position:"absolute"}),self.viewFooterTotalPrice.css({color:"#e53363"}),self.viewFooterTotalNum.css({color:"#e53363","font-size":"18px"}),self.viewFooterSettleBtn.css({background:"#ff5482",padding:"4px 12px","font-size":"13px",color:"#fff","border-radius":"4px",border:"1px solid #ff3c70","border-bottom":"2px solid #e53363","float":"right","margin-right":"15px","margin-top":"6px",height:"24px",width:"auto","line-height":"24px"})},renderFooterBg:function(){for(var self=this,e="",t=0;40>t;t++)e+='<i class="iconfont">&#xf01a6;</i>';self.viewFooterBg.css({height:"16px",overflow:"hidden",position:"absolute",bottom:"-8px",left:"0",width:"100%","white-space":"nowrap"}),self.viewFooterBg.html(e).find("i").css({display:"inline-block","font-size":"18px","letter-spacing":"-4px","margin-top":"-2px",color:"#FFF9FB"}),self.viewFooterBg.find("i:first").css({"margin-left":"-9px"})}},fn:{}}),function(e,t){t.custom=t.custom||{};var i="http://www.",n=function(e){return i+"beibei.com/resource/v2-"+e.join("_")+".html"},o={isGettingRequest:!1,requestList:[]},r=function(e,t){o.isGettingRequest=!0,$.ajax({url:n(e),type:"GET",dataType:"jsonp",jsonpCallback:"amsGetFn",cache:!0}).done(function(e){var t={};e.success&&(_.each(e.data,function(e){try{var i=JSON.parse(e);t[i.rid]=t[i.rid]||{},t[i.rid][i._id]=i}catch(n){}}),_.each(t,function(e,t){l(t,e)})),window.bb.send()}).always(function(i){_.each(e,function(e){var t=$('[ams][rid="'+e+'"]').not("[ams-done]"),i=t.closest("li");t.remove()}),t&&t(i),o.isGettingRequest=!1,a(o.requestList,o.isGettingRequest)})},a=function(e,t){var i=null;e&&e.length>0&&!t&&(i=e.shift(),r(i.rids,i.callback))},s=function(e,t){var i=e?[].concat(e):[],n={};i.length&&(o.requestList.push({rids:i,callback:t}),a(o.requestList,o.isGettingRequest))},c=function(e){var t=!0,i=+new Date(e.showtime.start),n=+new Date(e.showtime.end),o=+new Date;return i>o||o>n||e.use===!1?null:e},l=function(e,t){var i=$('[ams][rid="'+e+'"]');if(0!==i.length){if(0===_.size(t))return void i.remove();var n=null;if(_.each(t,function(e){var t=c(e);t&&(n=t)}),null===n)return void i.remove();var o=!1;try{n.img=JSON.parse(n.img)}catch(r){}var a=n;if(a.img&&_.isArray(a.img)&&0!==a.img.length||""===a.text)if(!_.isEmpty(a.bg)&&!_.isEmpty(a.img)&&_.isArray(a.img)&&a.img.length>0){a.bg.color&&i.css("background-color",a.bg.color);try{a.bg.img=JSON.parse(a.bg.img)}catch(r){}_.isArray(a.bg.img)&&a.bg.img.length>0&&(i.css("background-image",a.bg.img[0]),i.css("background-repeat","repeat")),i.find("img").attr("src",a.img[0]).removeAttr("width height"),o=!0}else!_.isEmpty(a.img)&&_.isArray(a.img)&&a.img.length>0&&(i.find("img").attr("src",a.img[0]).removeAttr("width height"),o=!0);else i.html(a.text),o=!0;if(!o)return void i.remove();a.link&&"url"===a.link.type&&a.link.url?i.attr("href",a.link.url).attr("target","_blank"):i.attr("href","javascript:;").attr("target","_self"),a.title&&i.attr("title",a.title),setTimeout(function(){i.find("img").css("zoom",1)}),+a.setTimeClose>0&&setTimeout(function(){i.slideUp(320,function(){i.remove()})},+a.setTimeClose),i.attr("ams-done",!0).show(),i.attr("data-style")&&i.attr("style",i.attr("style")+";"+i.attr("data-style"));var s=i.attr("c-bname")||"";$(document).on("click",i.selector,function(){window.bb.add({hxid:$.cookie("hxid")||$.cookie("JSESSIONID"),et:"click",rid:l,xid:$.cookie("st_au")||$.cookie("tem-au"),entity_type:"null",entity_list:[a._id]},{block_name:s}).send()});var l="91";10>+e?l+="00":100>+e&&(l+="0"),l+=e,window.bb.add({hxid:$.cookie("hxid")||$.cookie("JSESSIONID"),et:"show",rid:l,xid:$.cookie("st_au")||$.cookie("tem-au"),entity_type:"ams",entity_list:[a._id]})}};t.custom.amsControl=s;var d=e.pageData.amsRid;return d&&$.isArray(d)?(s(d),s):s}(window,window.X||(window.X={})),function(e,t,i){i.custom=i.custom||{},/seller(-dev)?\.beibei.com|hx(-dev)?\.beibei.com/gi.test(e.location.href)||(i.custom.ispAd=function(){var i=["iframe"],n=["jiathis.com","beibei.com","live800.com","kuaidi100.com","open.qzone.qq.com","mediav.com","sogou.com"],o=null,r=null,a=30,s=500,c=["http"];o=new RegExp("^("+c.join("|")+")://[\\w-\\.]*?("+n.join("|")+")"),r=o;var l=function(e){return r.test(e)},d=function(t){return""===t||t===e.location.href},u=function(e){return 0===e.search("http://")},p=function(e){var i=t(e).attr("id");return!!i&&0===i.search("ads")},f=function(e){var t=e.src;return d(t)&&p(e)||u(t)&&!l(t)},g=function(e,i){t.ajax({url:"http://b.husor.cn/click.html?log=framekiller&src="+encodeURIComponent(e)+"|pc|"+encodeURIComponent(i),dataType:"jsonp"})},h=function(e){for(var i=t(e),n=e.parentNode;n&&n!==document.body;)p(n)&&(t(n).remove(),g(e.src,location.href),e=null),n=n.parentNode;e&&f(e)&&(i.remove(),g(e.src,location.href))},m=function(){t(i.join(",")).each(function(e,t){h(t)})},v=function(){Object.defineProperty&&e.BCMain&&Object.defineProperty(e,"BCMain",{value:function(){},configurable:!1}),Object.defineProperties&&e.BCMain&&Object.defineProperties(e.BCMain,{_js:{value:"127.0.0.1",configurable:!1},_redirect:{value:"127.0.0.1",configurable:!1},_ads:{value:"127.0.0.1",configurable:!1},_cms:{value:"127.0.0.1",configurable:!1},_third_req:{value:"127.0.0.1",configurable:!1},show:{value:function(){},configurable:!1},third_req:{value:function(){},configurable:!1},ready:{value:function(){},configurable:!1}}),"undefined"!=typeof Object.freeze&&e.BCMain?Object.freeze(e.BCMain):e.BCMain=null},w=e.MutationObserver||e.WebKitMutationObserver||e.MozMutationObserver,b=!!w;if(b){var x=function(e){t.each(e,function(e,n){t.each(n.addedNodes,function(e,n){t.each(i,function(e,t){n.tagName===t.toUpperCase()&&h(n)});var o=t(n),r=o.length?o.find(i.join(",")):null;r&&r.length&&r.each(function(){h(this)})})})},_=new w(x);_.observe(document.body,{childList:!0,subtree:!0}),setTimeout(function(){_.disconnect()},a*s)}else{var y=function(){a--&&(m(),setTimeout(y,s))};setTimeout(y,s)}m(),v()},t(function(){i.custom.ispAd()}))}(window,$,window.X||(window.X={})),function(){var e="",t="",i={},n=!1,o=!1;if($(".J_mBnCat").length){i={getInfo:function(){$.ajax({url:"http://sapi"+(window.devMode?"-dev":"")+".beibei.com/item/category-100.html",type:"GET",cache:!0,dataType:"jsonp",jsonpCallback:"BeibeiItemCategoryGet"}).done(function(i){var n=i.main_categorys,a=n.length;if(0!==a){for(var s=0;a>s;s++){var c=n[s].category_name,l=n[s].subdivision_categorys,d=l.length;e+="<li>"+c+"</li>";for(var u=0;d>u;u++){var p="",f="",g=l[u],h=g.target;"search"===h?(p="http://d.beibei.com/search/item/query.html?cat="+g.operate_cid,f=g.desc):"search_keyword"===h?(p="http://d.beibei.com/search/item/query.html?keyword="+encodeURIComponent(g.data),f=g.title):(p=h,f=g.title),t+='<li class="rightCon'+s+'"><a href="'+p+'" clog c-emit="click" c-et="event" c-etl="'+p+'"><img src="'+g.img+'!60x60.jpg" width="60" height="60"><label>'+f+"</label></a></li>"}}t="<div>"+t+"</div>",$(".J_bnCate").html(e),$(".J_bnCate li:last").css("border-bottom",0),o||(r(0),o=!0,$(".J_bnCate li").eq(0).addClass("current"),$(".J_bnCate li").eq(0).css("border-bottom","1px solid #e0e0e0"))}})},searchInput:function(e){window.location.href="http://d.beibei.com/search/item/query.html?keyword="+encodeURIComponent(e)}};var r=function(e){var i=$(t).find(".rightCon"+e),n=i.length;if($(".J_bnCon").html(i),n){var o=n-(n%4||4)-1,r=Math.floor(n/4);4>=n?$(".J_bnCon li").css("border-bottom","0"):$(".J_bnCon li:gt("+o+")").css("border-bottom","0");for(var a=0;r>a;a++)$(".J_bnCon li").eq(4*(a+1)-1).css("border-right","0")}};$(".J_mBnCat").on("mouseenter",function(){var e="",t=$(".J_bnCate li");n||(i.getInfo(),n=!0),$(".J_mBnCon").show(),t.removeClass("current"),t.eq(0).addClass("current"),t.eq(0).css("border-bottom","1px solid #e0e0e0"),r(0)}).on("mouseleave",function(){$(".J_mBnCon").hide()}),$(document).on("mouseenter",".J_bnCate li",function(){var e=$(this),t=e.index();e.hasClass("current")||($(this).addClass("current").siblings().removeClass("current"),$(".J_bnCate li").css("border-bottom","1px solid #ececec"),$(".J_bnCate li:last").css("border-bottom",0),e.css("border-bottom","1px solid #e0e0e0"),$(".J_bnCate li:last").css("border-bottom",0),e.prev().length&&e.prev().css("border-bottom","1px solid #e0e0e0"),r(t))}),$(".J_bnSearchBtn").on("click",function(){var e=$(".J_bnSearchInput").val();return""===$.trim(e)?void $(".J_bnSearchInput").val(""):void i.searchInput(e)})}}(),function(){var e=$(".J_bnSearchInput");if(0!==e.length){var t=function(){var e=$(".J_bn_content"),t=function(e,t,i,n){return['<a href="'+i+'" target="_self" class="m-bn-item analysis-'+n+'">','<span class="m-bn-keyword J_bnKeyword">'+e+"</span>",'<span class="m-bn-memo">'+t+"&gt;</span></a>"].join("")},i="hidden",n=window.devMode?"http://d-dev.beibei.com/":"http://d.beibei.com/",o=window.devMode?"http://dev.beibei.com/":"http://www.beibei.com/",r=-1;return{setContent:function(i){for(var o=26,r="",a=15,s=0;s<i.length&&a>s;s++){var c=i[s];if("brand"===c.source){var l=c.bids&&c.bids.length>0?c.bids[0]:c.bid;r+=t(c.text,"进入品牌",n+"search/item/"+window.encodeURIComponent(c.text)+"---"+l+"-hot-1-suggest.html","brand")}else if("category"===c.source){var d=c.cids&&c.cids.length>0?c.cids[0]:c.cid;r+=t(c.text,"进入分类",n+"search/item/"+window.encodeURIComponent(c.text)+"--"+c.cid+"--hot-1-suggest.html","category")}else r+=t(c.text,"约"+c.count+"件",n+"search/item/query.html?keyword="+window.encodeURIComponent(c.text),"title")}e.html(r).animate({height:26*i.length},100)},init:function(){e.html("").addClass(i).css("height",0),r=-1},show:function(){e.removeClass(i)},hide:function(){e.addClass(i),r=-1},move:function(t){var i=e.find(".m-bn-item");return"0"===i.length?"":("down"===t?(r++,r>i.length-1&&(r=0)):(r--,0>r&&(r=i.length-1)),i.removeClass("m-bn-item-hover"),i.eq(r).addClass("m-bn-item-hover").find(".J_bnKeyword").text())}}}(),i=function(e,t){var n=window.encodeURIComponent(e),o="http://api"+(window.devMode?"-dev":"")+".beibei.com/mroute.html?method=beibei.item.search.suggest&keyword="+n,r=50,a=i.timeout,s=i.cache||(i.cache={});a&&(window.clearTimeout(a),a=null),i.timeout=window.setTimeout(function(){if(e in s)t(s[e]);else{var n=$.Deferred().promise();n=window.isIE7||window.isIE8?$.ajax(o,{type:"GET",dataType:"jsonp",data:{source:"ie"},cache:!0,jsonpCallback:"BeibeiItemSearchSuggest"}):$.ajax(o,{type:"GET",dataType:"json"}),n.done(function(i){s[e]=i,t(i)}),n.fail(function(){console.log("request fail")})}i.timeout=null},r)};e.on("focus",function(){$(this).trigger("keyup")}).on("keyup",function(e){var self=$(this);if(""===self.val())t.init(),window.clearTimeout(i.timeout),i.timeout=null;else if(38===e.keyCode||40===e.keyCode){var n=t.move(38===e.keyCode?"up":"down");n&&self.val(n)}else i(self.val(),function(e){e.search_result&&e.search_result.length>0&&""!==self.val()?(t.show(),t.setContent(e.search_result)):t.init()})}),$(document).on("click",function(e){var i=$(e.target);i.hasClass("J_bnSearchInput")||t.init()}),$(".J_bnSearchInput").on("keydown",function(e){var t=document.all?window.event:e;if(t&&13===t.keyCode){var i=$(".m-bn-item-hover");i.length>0?window.location.href=i.attr("href"):$(".J_bnSearchBtn").click()}})}}(),B.pageControl=B.Page.extend({init:function(){var self=this;self._super(),self.use("fn.setCartNumSubscript"),self.use("fn.initRegBox"),isIE6&&($("#st-nav .dropdown").mouseover(function(){$(this).addClass("hover"),$("ul",this).show()}).mouseleave(function(){$(this).removeClass("hover"),$("ul",this).hide()}),$("#st-nav .dropdown2").mouseover(function(){$(this).addClass("hover"),$(".follow",this).show()}).mouseleave(function(){$(this).removeClass("hover"),$(".follow",this).hide()}))},confSideBarFixedDistance:160,confShowRegBoxHeight:$(window).height(),widget:{sideBarCart:{use:"cartBox",conf:{container:".view-SideBarCart",mode:"trigger",trigger:".view-SideBarCartTrigger",border:!0,triggerPosition:["none",0,-100,-350],cbAfterGetData:function(){}}},topMenuCart:{use:"cartBox",conf:{container:".view-TopMenuCart",hoverGetData:".top-cart",needTitle:!1}}},viewSideBarCartTrigger:null,viewSideBarCartTriggerBtn:null,viewSideBarCart:null,viewRegistrationBox:null,viewMemberBox:null,viewQuickLoginBox:null,viewTopCart:null,viewTopMenuCart:null,viewRecordInfo:null,viewNotShippedClose:null,viewNotShippedIgnore:null,viewSidePhoneApp:null,stCantShowRegBox:!1,stRecordData:[],stNotShippedList:[],onWatch:function(){var self=this;self._super()},onEvent:function(){var self=this;self._super(),self.viewSideBarCartTriggerBtn.on("click",function(e){window.location.href=window.devMode?"http://trade-dev.beibei.com/cart/mine.html":"http://trade.beibei.com/cart/mine.html"}),$(document).on("click",self.viewRecordInfo.selector,function(){var e=$(this),t=e.attr("iid")||"",i=e.attr("pageType")||"",n="",o=$.cookie("st_au")||"";n="log=BBItem&au="+o+"&iid="+t+"&pageType="+i,self.use("api.getClickStatistics",n)}),self.viewSidePhoneApp.on("mouseover",function(){$(this).find(".side-panel-phone").show()}).on("mouseout",function(){$(this).find(".side-panel-phone").hide()}),$(document).on("click",self.viewNotShippedClose.selector,function(){self.notShippedBox&&self.notShippedBox.remove()})},api:{getClickStatistics:function(e){var t=window.devMode?"http://dev.beibei.com/click.html?":"http://b.husor.cn/click.html?",i=new Image;$("body").append(i),i.onload=i.onError=function(){$(this).remove()},i.src=t+e},getRegistrationHtml:function(){var self=this;$.ajax({url:"http://"+window.location.host+"/widget/bd/member_popup.api",type:"GET",dataType:"html"}).done(function(e){self.viewRegistrationBox.html(e),self.callIns()})},getMemberBoxHtml:function(e,t){var self=this;e=e||"",$.ajax({url:"http://"+window.location.host+"/widget/member_popup/box_html.api?type="+e+"&cb="+t,type:"GET",dataType:"html"}).done(function(e){self.viewMemberBox.html(e),self.callIns()})},getQuickLoginBoxHtml:function(){var self=this;$.ajax({url:"http://"+window.location.host+"/widget/member_popup/quick_login_html.api",type:"GET",dataType:"html"}).done(function(e){self.viewQuickLoginBox.html(e),self.callIns()})},getNotShippedAddress:{proUrl:"http://www.beibei.com/location/remote_list.html",devUrl:"http://dev.beibei.com/location/remote_list.html",type:"GET",dataType:"jsonp",jsonpCallback:"fn",noHxcsrf:!0,cache:!0,done:function(e){var self=this,t=e.address_list,i=$.cookie("defaddr"),n;self.stNotShippedList=t,_.find(t,function(e){return n=new RegExp("^"+e),i&&i.replace(n,"").length<6?(self.stNotShipped=!0,!0):void 0})}},getAddress:{proUrl:"http://d.beibei.com/location/address_list.html",devUrl:"http://d-dev.beibei.com/location/address_list.html",type:"GET",dataType:"jsonp",cache:!0,jsonpCallback:"getAddress",done:function(e){_.find(e.address_list,function(e,t){return 1===+e.Default?($.cookie("defaddr",+e.area),!0):void 0})}}},view:{showRegistrationBox:function(){var self=this;self.viewRegistrationBox=$('<div class="f-mask view-RegistrationBox"></div>'),$("body").append(self.viewRegistrationBox),self.viewRegistrationBox.css({position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%","z-index":"2002"}),self.use("api.getRegistrationHtml")},hideRegistrationBox:function(){var self=this;self.viewRegistrationBox.remove(),self.stCantShowRegBox=!0},showMemberBox:function(e,t){var self=this;self.viewMemberBox=$('<div class="f-mask view-MemberBox"></div>'),$("body").append(self.viewMemberBox),self.viewMemberBox.css({position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%","z-index":"2002"}),self.use("api.getMemberBoxHtml",e,t)},hideMemberBox:function(){var self=this;self.viewMemberBox.remove()},showQuickLoginBox:function(){var self=this;self.viewQuickLoginBox=$('<div class="f-mask view-QuickLoginBox"></div>'),$("body").append(self.viewQuickLoginBox),self.viewQuickLoginBox.css({position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%","z-index":"2002"}),self.use("api.getQuickLoginBoxHtml")},hideQuickLoginBox:function(){var self=this;self.viewQuickLoginBox.remove()}},ins:{backToTop:function(){$(window).scrollTop(0)}},fn:{getDefaultAddress:function(){var self=this;null===$.cookie("defaddr")?self.useApi("getAddress",{},{done:function(){self.use("fn.setNotShipped")}}):self.use("fn.setNotShipped")},setNotShipped:function(){var self=this;self.useApi("getNotShippedAddress")},setCartNumSubscript:function(){var self=this;self.widgetSideBarCart&&self.widgetSideBarCart.watch("stCartItemNum",function(){self.viewSideBarCartTrigger.find(".cart-num").html(self.widgetSideBarCart.stCartItemNum)})},repairSidePanel:function(e){var self=this,t=$("body"),i=$(window),n=t.height(),o=function(){n=t.height()-i.scrollTop()-i.height(),n+80<=self.confSideBarFixedDistance?e.css({bottom:self.confSideBarFixedDistance-n}):e.css({bottom:80})};i.scroll(o),o()},initRegBox:function(){var self=this;if(_.isNull($.cookie("_last_login_id_"))&&!B.H.isLogin()&&/utm_source/.test(window.location.href)){if(document.all&&!document.querySelector)return self.use("view.showRegistrationBox"),void(self.stCantShowRegBox=!0);var e=$(window),t=$("body"),i=function(){e.scrollTop()>self.confShowRegBoxHeight&&!self.stCantShowRegBox&&!B.H.isLogin()&&(self.use("view.showRegistrationBox"),self.stCantShowRegBox=!0,e.off("scroll",i))};e.on("scroll",i)}return null===$.cookie("_utm_login_")&&!/#BBLogin/.test(window.location.href)||B.H.isLogin()||!_.isNull($.cookie("_last_login_id_"))?void("1"===window.quickLogin&&self.use("view.showQuickLoginBox")):(self.use("view.showRegistrationBox"),self.stCantShowRegBox=!0,void $.cookie("_utm_login_",null))},initMemberBox:function(e,t){t=t||"";var self=this;B.H.isLogin()||$(".f-mask").length>0||self.use("view.showMemberBox",e,t)},hideMemberBox:function(){var self=this;self.use("view.hideMemberBox")}}});